<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Blackjack</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
</head>

<body class="bg-dark text-light">
    <div id="app" class="container py-5 text-center">
        <div class="row">
            <div class="col-sm-2">
            </div>
            <div class="col-md-8">
                <h1 class="mb-4">Mozartjack</h1>
            </div>
            <div class="col-sm-2">
                <button class="btn btn-info btn-sm m-1" style="float: right;" @click="changeName">Přejmenovat</button>
            </div>
        </div>

        <p>Blackjack po Mozarťácku</p>

        <hr />

        <!-- Controls -->
        <div class="mb-3">
            <button class="btn btn-success m-1" @click="deal" :disabled="inGame || bet===0">Deal</button>
            <button class="btn btn-primary m-1" @click="hit" v-if="inGame" :disabled="!inGame">Hit</button>
            <button class="btn btn-warning m-1" @click="stand" v-if="inGame" :disabled="!inGame">Stand</button>
            <button class="btn btn-secondary m-1" @click="removeBet" v-if="!inGame" :disabled="inGame || bet===0">Zrušit sázku</button>
        </div>

        <div class="row">

            <div class="col-md-6">
                <!-- Balance & Bet -->
                <div class="mb-3">
                    <h4>Zůstatek: ${{ balance }}</h4>
                    <h5>Aktuální sázka: ${{ bet }}</h5>
                    <div class="d-flex justify-content-center flex-wrap">
                        <button v-for="chip in [10,20,50,100,200]" :key="chip" class="btn rounded-circle fw-bold m-2"
                            :class="chipClass(chip)" style="width:60px; height:60px;" @click="placeBet(chip)"
                            :disabled="inGame || balance < chip">
                            ${{ chip }}
                        </button>
                    </div>

                </div>
            </div>

            <div class="col-md-6">
                <!-- Dealer -->
                <div class="row mb-4">
                    <div class="col">
                        <h3>Dealer</h3>
                        <div class="d-flex justify-content-center flex-wrap">
                            <div v-for="(card, index) in dealerCards" :key="'dealer'+index" class="card m-1"
                                :class="dealerCardClass(card, index)" style="width: 70px; height: 100px;">
                                <div class="card-body d-flex align-items-center justify-content-center p-2 fw-bold">
                                    <span v-if="!dealerTurn && index===0">?</span>
                                    <span v-else>{{ card.suit }}{{ card.rank }}</span>
                                </div>
                            </div>
                        </div>
                        <p v-if="dealerTurn">Celkem: {{ dealerTotal }}</p>
                        <p v-else>Celkem: ??</p>
                    </div>
                </div>

                <!-- Player -->
                <div class="row mb-4">
                    <div class="col">
                        <h3>{{ playerName }}</h3>
                        <div class="d-flex justify-content-center flex-wrap">
                            <div v-for="(card, index) in playerCards" :key="'player'+index" class="card m-1"
                                :class="playerCardClass(card)" style="width: 70px; height: 100px;">
                                <div class="card-body d-flex align-items-center justify-content-center p-2 fw-bold">
                                    {{ card.suit }}{{ card.rank }}
                                </div>
                            </div>
                        </div>
                        <p>Celkem: {{ playerTotal }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Result -->
        <h2 class="mt-3">{{ message }}</h2>
    </div>

    <script src="app.js"></script>

    <audio id="sfx-deal" src="sfx/deal.wav"></audio>
    <audio id="sfx-chip" src="sfx/chip.wav"></audio>
    <audio id="sfx-hit" src="sfx/hit.wav"></audio>
    <audio id="sfx-lost" src="sfx/lost.wav"></audio>
    <audio id="sfx-push" src="sfx/push.wav"></audio>
    <audio id="sfx-win" src="sfx/win.wav"></audio>
</body>

</html>